# 小程序
## 常用工具
多看官方文档：https://developers.weixin.qq.com/miniprogram/dev/framework/
### 字体图标（借助阿里巴巴矢量图库）
1. 首先先找到所需的图标，鼠标放到图标上点击添加入库（三个小按钮上面的小按钮），然后点页面右上角的购物车图标，点击添加至项目。
2. 添加至项目后右上角小购物车图标里就没有图标了，要点击首页导航栏上面的资源管理-我的项目，点击"font-class"，点击查看在线连接，点击"暂无代码，点击生成"，然后会生成一个css链接，点击这个css链接里面的代码就是这些字体图标的代码。
3. 为了防止一个可能影响调试的报错，在生成css代码前，先在"资源管理-我的项目"页面找到"项目设置"，然后把base64勾选上，再生成css代码
4. 在项目根目录下新建文件夹iconfont/iconfont.wxss文件或iconfont.scss文件，把刚才生成的css代码贴进来
5. 在app.scss中导入全局注册iconfont，注意导入后必须要以分号结尾
``` scss
@import"./iconfont/iconfont.scss";
```
6. 在页面中使用这些图标，在想要添加字体图标的text组件文字前再加一个text组件，给它们添加类名class="字体图标类名"然后保存，即可在页面中生效
``` html
<view class="info">
  <text><text class="iconfont icon-shouye"></text> 同城配送</text>
  <text><text class="iconfont icon-on_time"></text> 行业龙头</text>
  <text><text class="iconfont icon-peisong"></text> 半小时送达</text>
  <text><text class="icon-tubiao_dianzan"></text> 100% 好评</text>
</view>
```
**注意text嵌套text必须在一行，否则会出现图标和字不在同一行的情况**
## 文件
### 主体文件和页面文件
一个完整的小程序项目分为两个部分：主体文件和页面文件
1. 主体文件又称小程序全局文件，顾名思义，全局文件能够作用于整个小程序，影响到小程序的每个页面，主体文件必须放到项目的根目录下，主要由三部分组成：

|  文件名  |       作用       | 是否必须 |
| :------: | :--------------: | :------: |
|  app.js  |  小程序入口文件  |   必须   |
| app.json | 小程序的全局配置 |   必须   |
| app.wxss | 小程序的全局样式 |  非必须  |

2. 页面文件是每个页面所需的文件，小程序页面文件都存放在 pages 目录下，一个页面一个文件夹，每个页面通常由四个文件组成，每个文件只对当前页面有效：

| 文件名 |   作用   | 是否必须 |
| :----: | :------: | :------: |
|  .js   | 页面逻辑 |   必须   |
| .wxml  | 页面结构 |   必须   |
| .wxss  | 页面样式 |  非必须  |
| .json  | 页面配置 |  非必须  |

>  注意：
> 1. 页面文件，wxss、json 文件能够覆盖主体文件中的样式和配置
> 2. 强烈建议：页面文件夹名称和页面文件名称要保持一致

### 新建页面方式
1.  在 pages 目录上 点击右键 `新建文件夹`，输入页面目录的名称，在 list  目录上 点击右键 `点击 page`，输入页面文件的名称
> 注意：
>在输入页面文件名称的时候，不要输入后缀名 
> 新建页面成功以后，会在 app.json 的 pages 选项中新增页面路径

2. 在 app.json 的 pages 选项中，新增页面路径
在新增页面目录以后，会自动在 pages 目录下生成页面文件

## 小程序组件（标签）
### 小程序标签和html区别
1. wxml
`WXML` 类似 `HTML` 的角色，在 `WXML` 中需要用小程序提供的 `view`、`text` 、`image`、`navigator` 等标签来构建页面结构
2. wxss
`WXSS` 类似 `CSS` 的角色，`WXSS` 具有 `CSS` 大部分的特性，小程序在 `WXSS` 也做了一些扩充和修改，新增了尺寸单位 `rpx`、提供了全局的样式和局部样式，`WXSS` 仅支持部分 `CSS` 选择器。
3. rpx
`rpx `:  小程序新增的拓展单位，可以根据屏幕宽度进行自适应，小程序规定任何型号手机：屏幕宽都为 750 rpx。
> 建议：
> iPhone6 的设计稿一般是 750px，小程序的宽是 750rpx
> ​	在我们开发小程序页面时，量取多少px，直接写多少rpx，开发方便，也能适配屏幕的适配
> 原因：
> ​	设计稿宽度是 750px，而 iPhone6 的手机设备宽度是 375px， 设计稿想完整展示到手机中，就需要缩小一倍
> ​	在 iPhone6下，px 和 rpx 的换算关系是：1rpx = 0.5px， 750rpx = 375px，刚好能够填充满整个屏幕的宽度
4. 全局样式和局部样式
全局样式：指在 `app.wxss`中定义的样式规则，作用于每一个页面，例如：设置字号、背景色、宽高等全局样式
局部样式：指在`page.wxss`中定义的样式规则，只作用在对应的页面，并会覆盖 app.wxss 中相同的选择器。
### 轮播图组件swiper
1. `swiper`：滑块视图容器，常用来实现轮播图，其中只可放置 [swiper-item](https://developers.weixin.qq.com/miniprogram/dev/component/swiper-item.html) 组件，否则会导致未定义的行为
2. `swiper-item`：仅可放置在[swiper](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html)组件中，宽高自动设置为100%，代表 `swiper` 中的每一项
3. 使用 `swiper` 组件提供的属性，实现轮播图的订制，常见属性如下：

|                                         属性                                          |         说明         |              类型               |
| :-----------------------------------------------------------------------------------: | :------------------: | :-----------------------------: |
|                                    indicator-dots                                     |  是否显示面板指示点  |      boolean (默认 false)       |
|                                    indicator-color                                    |      指示点颜色      | color (默认：rgba(0, 0, 0, .3)) |
|                                indicator-active-color                                 | 当前选中的指示点颜色 |      color (默认：#000000)      |
|                                       autoplay                                        |     是否自动切换     |      boolean (默认 false)       |
|                                       interval                                        |   自动切换时间间隔   |       number (默认 5000)        |
|                                       circular                                        |   是否采用衔接滑动   |      boolean (默认 false)       |
| [其他属性...](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html) |

#### 轮播图代码

```html
<!-- 轮播图区域 -->
<view class="swiper">
  <swiper
    circular
    autoplay
    indicator-dots
    interval="2000"
    indicator-color="#efefef"
    indicator-active-color="#ccc"
  >
    <swiper-item>
      <!-- 在小程序中图片不能使用 img 标签，使用后不会生效 -->
      <!-- <img src="../../assets/banner/banner-1.png" alt=""/> -->

      <!-- 需要使用 images 组件 -->
      <!-- image 组件不给 src 属性设置默认值，也占据宽和高 -->
      <!-- image 默认具有宽度，宽是 320px 高度是 240px -->

      <!-- mode 属性：用来设置图片的裁切模式、纵横比例、显示的位置 -->
      <!-- show-menu-by-longpress 属性：长按转发给朋友、收藏、保存图片 -->
      <image src="../../assets/banner/banner-1.png" mode="aspectFill" show-menu-by-longpress />
    </swiper-item>

    <swiper-item>
      <image src="../../assets/banner/banner-2.png" />
    </swiper-item>

    <swiper-item>
      <image src="../../assets/banner/banner-3.png" />
    </swiper-item>
  </swiper>
</view>

```



`➡️ pages/index/index.scss`

```scss

/** index.wxss **/
page {
  height: 100vh;
  background-color: #efefef !important;
}

swiper {
  height: 360rpx;

  swiper-item {
    image {
      width: 100%;
      height: 100%;
    }

    // 在 Sass 拓展语言中，& 符号表示父选择器的引用。它用于在嵌套的选择器中引用父选择器
    // 下面这段代码在编译以后，生成的代码是 swiper-item:first-child
    // &:first-child {
    //   background-color: skyblue;
    // }

    // &:nth-child(2) {
    //   background-color: lightcoral;
    // }

    // &:last-child {
    //   background-color: lightseagreen;
    // }
  }
}
```


### text 组件
text 是文本组件，类似于 span，是行内元素 

### 页面跳转组件navigator

```html
  <navigator url="/pages/list/list">
    <image src="/assets/cate-2.png" alt=""/>
    <text>鲜花玫瑰</text>
  </navigator>
```

常用的属性有 2 个：
1）url ：当前小程序内的跳转链接
   - 在进行 页面跳转时，需要再路径的前面添加 / 斜线，否则跳转不成功
2）open-type ：跳转方式
   - navigate：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面，保留上一级页面
   - redirect： 关闭当前页面，跳转到应用内的某个页面。但不能跳转到 tabbar 页面，关闭上一级页面
   - switchTab：只能跳转到tabBar页面，不能跳转到非v=tabbar页面，并关闭其他所有非 tabBar 页面
   - reLaunch：关闭所有页面，打开到应用内的某个页面
   - navigateBack：关闭当前页面，返回上一页面或多级页面（delta属性表示返回的层级，默认返回上一个页面dekta=1）
   - 
   - 1.要么写navigate要么啥也不写，因为其余的会关闭页面，你navigateBack不回去
   - 2.tabBar页面不能navigateBack上一页，如要返回使用：switchTab

> 注意：
> 1. 路径后可以带参数。参数与路径之间使用 ? 分隔，参数键与参数值用 = 相连，不同参数用 & 分隔
>    例如：`/list?id=10&name=hua`，在 `onLoad(options)` 生命周期函数 中获取传递的参数 
>
> 2. 属性 `open-type="switchTab"` 时不支持传参

### 可滚动视图区域scroll-view
它可以在小程序中实现类似于网页中的滚动条效果，用户可以通过手指滑动或者点击滚动条来滚动内容，scroll-view 组件可以设置滚动方向、滚动条样式、滚动到顶部或底部时的回调函数等属性，可以根据实际需求进行灵活配置。
#### 横向滚动（scroll-x 属性）
使用横向滚动时，需要添加 scroll-x 属性，然后通过 css 进行结构绘制，实现页面横向滚动
```html
<view class="hot">
  <scroll-view class="scroll-x" scroll-x>
    <view>1</view>
    <view>2</view>
    <view>3</view>
  </scroll-view>
</view>
```
```scss
.hot {
  margin-top: 16rpx;

  .scroll-x {
    width: 100%;
    white-space: nowrap;
    background-color: lightblue;

    view{
      display: inline-block;
      width: 50%;
      height: 80rpx;

      &:last-child{
        background-color: lightseagreen;
      }

      &:first-child{
        background-color: lightpink;
      }
    } 
  }
}
```
#### 纵向滚动（scroll-y 属性）
使用竖向滚动时，需要给[scroll-view](https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html)一个固定高度，同时添加  scroll-y 属性，实现页面纵向滚动

```html
<view class="hot">
  <scroll-view class="scroll-y" scroll-y>
    <view>1</view>
    <view>2</view>
    <view>3</view>
  </scroll-view>
</view>
```



`➡️ pages/index/index.wxss`： 

```css
.hot {
  margin-top: 16rpx;

  .scroll-y {
    height: 400rpx;
    background-color: lightsalmon;
    margin-top: 60rpx;

    view {
      height: 400rpx;

      &:nth-child(odd) {
        background-color: lightseagreen;
      }

      &:nth-child(even) {
        background-color: lightcoral;
      }
    }  
  }
}
```

### 背景图片
小程序的样式文件中可以使用 `background-image` 属性来设置一个元素的背景图像，但是小程序的 `background-image` 不支持本地路径。
否则会提示：本地资源图片无法通过 WXSS 获取，可以使用网络图片，或者 base64，或者使用<image/>标签


如果用base64，那么在网上找转化base64的网址转化图片，然后把生成的图片地址写进去，但是这样的地址会特别特别长，如果编译器设置了自动换行那么非常占行
```html
<view class="image"></view>
```
```css
.image {
  width: 100%;
  height: 400rpx;
  /* 错误做法：本地资源图片无法通过 WXSS 获取 */
  /* background-image: url('../../static/微信.jpg'); */

  /* 法1：使用网络图片 */
  /* background-image: url('http://8.131.91.46:6677/TomAndJerry.jpg'); */
    
  /* 法2：使用 base64 格式展示图片 */
  /* base64 编码的文件很长，这个地址老师在这边进行了简写，在测试的时候，需要自己将这里转成完成的 64 编码 */
  background-image: url("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAeAB4AAD/.....")
  background-position: center;
  background-size: cover;
}
```
### 其他组件
## 小程序事件系统
小程序中和用户做交互需要编写 `JS` 脚本文件，例如：响应用户的点击、获取用户输入的值等等